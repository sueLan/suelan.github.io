<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="RY&#39;s blog">
  <meta name="keyword" content="hexo-theme, vuejs">
  
    <link rel="shortcut icon" type="image/ico" href="[object Object]"/>
  
  <title>
    
      XMPP Overview | RY &#39;s Blog
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
    
<script src="/js/qrious.js"></script>

  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 5.2.0"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>RY 's Blog</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/series/" class="item-link">Series</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/series/" class="menu-link">Series</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>XMPP Overview</h2>
  <p class="post-date">2019-03-26</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>跟朋友做一个项目，想快速开发，选了XMPP协议。它是一套通信协议。分为两部分，<a target="_blank" rel="noopener" href="https://xmpp.org/rfcs/rfc6121.html#A%20Sample%20Session">XMPP Core Services</a> 和 XMPP Extension Protocols. 核心由基础feature组成，扩展协议就非常丰富，而且一直在发展。Wiki上有张各种IM协议的汇总表，推荐！</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Comparison_of_instant_messaging_protocols">Comparison of instant messaging protocols - Wikipedia</a></li>
</ul>
<h2 id="XMPP-Addressing"><a href="#XMPP-Addressing" class="headerlink" title="XMPP Addressing"></a>XMPP Addressing</h2><p>这是一张Client-Server的图，图里的server、client都遵循XMPP协议。叫 XMPP entity. 它们有各自唯一的Address, 格式如<a href="mailto:&#39;username@server.com">&#39;username@server.com</a>‘, 叫 JID (Jaber ID)<br> <a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/rfc7622/">RFC 7622 - Extensible Messaging and Presence Protocol (XMPP): Address Format</a></p>
<p> <img src="/img/32c16f22-9862-45e8-b15f-1b1eceb7b30f/28a215f7.png" alt="28a215f7.png"></p>
<p>其中resource是拿来做同一账号多客户端标记的， 比如图中<code>User1</code> 从 pc ,phone1 和 phone2登录同一账号，resource分别是 <code>pc</code>, <code>iphone1</code>,<code>iphone2</code></p>
<h2 id="XMPP-Client-Server-Streams"><a href="#XMPP-Client-Server-Streams" class="headerlink" title="XMPP Client- Server Streams"></a>XMPP Client- Server Streams</h2><p> 客户端与服务端通过长链接方式通信，现在多用WebSocket。当客户端跟服务端握手成功，它们开始用 XML stream通信。</p>
<p> <img src="/img/32c16f22-9862-45e8-b15f-1b1eceb7b30f/f1565a2e.png" alt="f1565a2e.png">\</p>
<p>XML stream 总是以  <code>&lt;stream&gt;</code> 开头， <code>&lt;/stream&gt;</code> tag结尾。是xml消息的容器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">An XML stream is a container for the exchange of XML elements between any two entities over a network. </span><br><span class="line">During the life of the stream, the entity that initiated it can send an unbounded number of XML elements over the stream, either elements used to negotiate the stream (e.g., to complete TLS negotiation or SASL negotiation) or XML stanzas. </span><br></pre></td></tr></table></figure>
<p>下面是client跟server的一次消息交互， 绿色来自client的，黑色消息来自server</p>
<p>  <img src="/img/32c16f22-9862-45e8-b15f-1b1eceb7b30f/65d38868.png" alt="f97e583b.png"></p>
<h3 id="XML-stanza"><a href="#XML-stanza" class="headerlink" title="XML stanza"></a>XML stanza</h3><p> An XML stanza is the basic unit of meaning in XMPP. A stanza is a first-level element (at depth=1 of the stream) whose element name is “message”, “presence”, or “iq” and whose qualifying namespace is ‘jabber:client’ or ‘jabber:server’. </p>
<h3 id="XMPP-Communication-Primitives"><a href="#XMPP-Communication-Primitives" class="headerlink" title="XMPP Communication Primitives"></a>XMPP Communication Primitives</h3><p>A <code>stanza</code> is the smallest piece of XML data a client can send to a server ( server send to client) in one package.</p>
<p>xmpp中，服务端、客户数据交换时，最小XML数据单位 叫 stanza。如上图，绿色的就是一个stanza，黑色的也是一个stanza。Stanza有几种类型: <code>message</code>, <code>iq</code>, <code>presence</code>。 </p>
<h4 id="The-Message-Stanza"><a href="#The-Message-Stanza" class="headerlink" title="The Message Stanza"></a>The Message Stanza</h4><p>The <message/> stanza is meant to be used to send data between XMPP entities.</p>
<p><img src="/img/32c16f22-9862-45e8-b15f-1b1eceb7b30f/6fe8a15e.png" alt="6fe8a15e.png"></p>
<ul>
<li>from：发送方</li>
<li>to： 接收方</li>
<li>body: 消息内容</li>
<li>type 有几种类型:<br>  -<code>&lt;message type=”chat”/&gt;</code> ( chat message stanza) <ul>
<li><code>&lt; message type=”groupchat”/&gt;</code> ( groupchat message stanza)</li>
<li><code>&lt; message type=”error”/&gt;</code> (error message stanza)</li>
</ul>
</li>
</ul>
<h4 id="The-Presence-Stanza"><a href="#The-Presence-Stanza" class="headerlink" title="The Presence Stanza"></a>The Presence Stanza</h4><p>用来表示在线状态的</p>
<p><img src="/img/32c16f22-9862-45e8-b15f-1b1eceb7b30f/0fbe995b.png" alt="0fbe995b.png"></p>
<p><code>show</code> 标签里可能会有的几种状态:<br><code>chat</code> : online and available for chat ;<br><code>away</code> : 暂时离开<br><code>xa</code> : 长时间离开<br><code>dnd</code>: 请勿打扰</p>
<p>如果你想知道别的状态，需要先发消息给Server，subscribe别人。 </p>
<h4 id="The-IQ-stanza"><a href="#The-IQ-stanza" class="headerlink" title="The IQ stanza"></a>The IQ stanza</h4><p> The IQ( Info/Query) stanza is used to get some information from the server ( info about the server or its registered clients) or to apply some settings to the server.</p>
<p> 用来获取消息，或者请求设置</p>
<p>Type属性中的类型 :get ,set ,result or error. </p>
<ul>
<li><code>&lt; iq type=”get”/&gt;</code> stanzas are used to get(ask) some information ( from the server). </li>
<li><code>&lt;iq type=”set”/&gt;</code> stanzas are used to apply some settings to the server.When you send get/set IQ stanzas to the server ,</li>
<li>it can reply either with an <code>&lt; iq type=”result”/&gt;</code> stanza when your request has been successfully processed by the server or </li>
<li><code>&lt;iq type=”error”/&gt;</code> stanza when something has gone wrong with your request.The figure below shows an IQ stanza that we send to the server and the reply we get from the server.</li>
</ul>
<p><img src="/img/32c16f22-9862-45e8-b15f-1b1eceb7b30f/30c96f66.png" alt="30c96f66.png"></p>
<p>The client sends an IQ get stanza to the server to request its contact list.We know it is asking for the contact list because of the <code>jabber:iq:roster</code> XML namespace.</p>
<p>The XMPP engine in the server is programmed to know that when a client sends <code>jabber:iq:roster</code> namespaced IQ ,it wants to retrieve its contact list.There are other <code>namespaces</code> in XMPP for other uses and you will surely come accross them in your XMPPing journey.</p>
<p>The server responds with a list of the JID’s contacts wraped within a <code>jabber:iq:roster</code> namespaced <code>&lt;query/&gt;</code>tag.</p>
<h2 id="本地搭建-Server"><a href="#本地搭建-Server" class="headerlink" title="本地搭建 Server"></a>本地搭建 Server</h2><p>我搭的是ejabberd. 官方安装教程: <a target="_blank" rel="noopener" href="https://docs.ejabberd.im/admin/installation/#install-on-macos">Installing ejabberd | ejabberd Docs</a></p>
<h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /Applications/ejabberd-19.02</span><br><span class="line">//开启服务</span><br><span class="line">./bin/ejabberdctl start  </span><br><span class="line">//状态</span><br><span class="line">./bin/ejabberdctl status  </span><br><span class="line"></span><br><span class="line">// help 查看更多功能哦</span><br><span class="line">./bin/ejabberdctl help </span><br></pre></td></tr></table></figure>
<h4 id="注册账户"><a href="#注册账户" class="headerlink" title="注册账户"></a>注册账户</h4><p>打开 <a target="_blank" rel="noopener" href="http://localhost:5280/admin/">admin 页面</a>, 虚拟主机 -&gt; localhost(可能你的名字不一样) -&gt; 用户。 现在你可以自己创建账户了。</p>
<p><img src="/img/32c16f22-9862-45e8-b15f-1b1eceb7b30f/578b88b6.png" alt="578b88b6.png"></p>
<p>如果有自定义需求,配置教程 <a target="_blank" rel="noopener" href="https://docs.ejabberd.im/admin/configuration/#mod-http-ws">Configuring ejabberd | ejabberd Docs</a> </p>
<h4 id="客户端玩起来"><a href="#客户端玩起来" class="headerlink" title="客户端玩起来"></a>客户端玩起来</h4><p>客户端有很多<a target="_blank" rel="noopener" href="https://xmpp.org/software/clients.html">选择</a>，不过大多数都是渣。如果是WebSocket，用这个 <a target="_blank" rel="noopener" href="https://github.com/processone/xmpp-websocket-client">GitHub - processone/xmpp-websocket-client: Test XMPP Websocket client</a> 调试可以看到stanza，挺方便的。</p>
<p>如果Mac用户报auth问题，可以打开<code>vim conf/ejabberd.yml</code>, <code>tls</code>配置成<code>false</code><br><img src="/img/32c16f22-9862-45e8-b15f-1b1eceb7b30f/5202ee46.png" alt="5202ee46.png"></p>
<h4 id="关于js-lib"><a href="#关于js-lib" class="headerlink" title="关于js lib"></a>关于js lib</h4><p>打算用React Native写，lib选了 <a target="_blank" rel="noopener" href="https://github.com/xmppjs/xmpp.js">GitHub - xmppjs/xmpp.js: XMPP for JavaScript</a> 。当然 Web多用框架 Strophe.js。这儿有个简单比较<a target="_blank" rel="noopener" href="https://github.com/xmppjs/xmpp.js/issues/217">How do you compare to strophe.js · Issue #217 · xmppjs/xmpp.js · GitHub</a></p>
<h3 id="其他资料"><a href="#其他资料" class="headerlink" title="其他资料"></a>其他资料</h3><ul>
<li><p>简单介绍 <a target="_blank" rel="noopener" href="https://www.blikoontech.com/xmpp/xmpp-a-soft-friendly-introduction">A friendly introduction to XMPP – blikoon</a></p>
</li>
<li><p>官方协议很详细，例子也很形象。 <a target="_blank" rel="noopener" href="https://xmpp.org/rfcs/rfc6120.html#tls">Extensible Messaging and Presence Protocol (XMPP): Core</a></p>
</li>
<li><p>如何选择即时通讯应用的数据传输格式 <a target="_blank" rel="noopener" href="http://www.52im.net/thread-276-1-1.html">如何选择即时通讯应用的数据传输格式-其它分享/专项技术区 - 即时通讯开发者社区!</a></p>
</li>
<li>强列建议将Protobuf作为你的即时通讯应用数据传输格式 <a target="_blank" rel="noopener" href="http://www.52im.net/thread-277-1-1.html">强列建议将Protobuf作为你的即时通讯应用数据传输格式-其它分享/专项技术区 - 即时通讯开发者社区!</a> </li>
</ul>
</section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
    
      <a class="nav-right" href="/2019/03/29/XMPP-2-%E6%B3%A8%E5%86%8C%E8%B4%A6%E6%88%B7/">
        
          XMPP(2):注册账户
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">扫描二维码，分享此文章</p>
      </div>
    
    <!-- 二维码 END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo="null"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>    
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#XMPP-Addressing"><span class="toc-nav-text">XMPP Addressing</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#XMPP-Client-Server-Streams"><span class="toc-nav-text">XMPP Client- Server Streams</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#XML-stanza"><span class="toc-nav-text">XML stanza</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#XMPP-Communication-Primitives"><span class="toc-nav-text">XMPP Communication Primitives</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#The-Message-Stanza"><span class="toc-nav-text">The Message Stanza</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#The-Presence-Stanza"><span class="toc-nav-text">The Presence Stanza</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#The-IQ-stanza"><span class="toc-nav-text">The IQ stanza</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA-Server"><span class="toc-nav-text">本地搭建 Server</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="toc-nav-text">启动服务</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%B3%A8%E5%86%8C%E8%B4%A6%E6%88%B7"><span class="toc-nav-text">注册账户</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%8E%A9%E8%B5%B7%E6%9D%A5"><span class="toc-nav-text">客户端玩起来</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%85%B3%E4%BA%8Ejs-lib"><span class="toc-nav-text">关于js lib</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%85%B6%E4%BB%96%E8%B5%84%E6%96%99"><span class="toc-nav-text">其他资料</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://suelan.github.io/2019/03/26/XMPP-Overview/';
    var banner = 'undefined'
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


  <script>
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });
  </script>






    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2021 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a target="_blank" rel="noopener" href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>